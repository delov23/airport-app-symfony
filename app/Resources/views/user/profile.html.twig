{% extends 'base.html.twig' %}

{% block title %}
    {{ user.fullName }}'s Profile
{% endblock %}

{% block main %}
    <main class="main-section">
        <h1 class="text-center fancy-text">
            Welcome, {{ user.title }} {{ user.fullName }}
        </h1>
        <h2 class="text-center fancy-text-small">Email: {{ user.email }} | Trips
            booked: {{ user.reservations|length }} </h2>
        <div class="columns margin-top">
            {% if is_granted('ROLE_USER') %}
                <div class="column">
                    <h2>Upcoming trips</h2>
                    {% for trip in user.reservations %}
                        {{ trip.flight.route.flightNumber }}
                    {% endfor %}
                </div>
            {% endif %}

            <div class="column">
                <h2>Your account</h2>
                <a href="{{ path('user_profile') }}">
                    <button class="btn btn-outline bg-white">Request password change</button>
                </a>
                <a href="{{ path('user_profile') }}">
                    <button class="btn btn-outline bg-white">Edit your personal information</button>
                </a>
                {% if is_granted('ROLE_ADMIN') %}
                    <a href="{{ path('admin_panel') }}">
                        <button class="btn btn-outline bg-white">Admin Panel. System Management</button>
                    </a>
                {% endif %}
            </div>
        </div>
    </main>
{% endblock %}